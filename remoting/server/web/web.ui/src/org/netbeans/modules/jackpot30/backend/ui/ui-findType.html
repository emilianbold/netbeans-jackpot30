<html>
<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
    <script type="text/javascript">
        function methodPopup(relativePath, resultFile, signature) {
            $('#popup').html('<a href="/index/ui/show?path=' + relativePath + '&relative=' + resultFile + '">Source Code</a><br>' +
                             '<a href="/index/ui/usages?path=' + relativePath + '&signatures=' + signature + '">Usages in the current project</a><br>' +
                             '<a href="/index/ui/usages?signatures=' + signature + '">Usages in all known projects</a><br>')
                            .dialog({
                                title: 'Show'
                            });
        }
        function classPopup(relativePath, resultFile, signature) {
            $('#popup').html('<a href="/index/ui/show?path=' + relativePath + '&relative=' + resultFile + '">Source Code</a><br>' +
                             '<a href="/index/ui/usages?path=' + relativePath + '&signatures=' + signature + '">Usages in the current project</a><br>' +
                             '<a href="/index/ui/usages?signatures=' + signature + '">Usages in all known projects</a><br>')
                            .dialog({
                                title: 'Show'
                            });
        }
        function otherPopup(relativePath, resultFile, signature) {
            $('#popup').html('<a href="/index/ui/show?path=' + relativePath + '&relative=' + resultFile + '">Source Code</a><br>' +
                             '<a href="/index/ui/usages?path=' + relativePath + '&signatures=' + signature + '">Usages in the current project</a><br>' +
                             '<a href="/index/ui/usages?signatures=' + signature + '">Usages in all known projects</a><br>')
                            .dialog({
                                title: 'Show'
                            });
        }
    </script>
</head>
<body>
<form method="get">
<label for="path">Project:</label>
<select size="1" name="path">");
    <#list paths as path>
        <option <#if selectedPath?? && path.segment == selectedPath>selected</#if> value="${path.segment}">
            ${path.displayName}
        </option>
    </#list>
</select>
<br>
<label for="prefix">Symbol Prefix:</label><input type="text" name="prefix"<#if prefix??>value="${prefix}"</#if>/><br>
<input type="submit" name="Find Candidates"/>
</form>

<#if results??>
    Found symbols:<br>
        <#list results as result>
                <img src="/index/icons/${result.icon}" alt="${result.kind}"/>
                <#if result.kind == "METHOD">
                    <a href="javascript: methodPopup('${selectedPath}', '${result.file}', '${result.kind}:${result.enclosingFQN}:${result.simpleName}:${result.signature}')">
                <#elseif result.kind == "CLASS" || result.kind == "INTERFACE" || result.kind == "ENUM" || result.kind == "ANNOTATION_TYPE">
                    <a href="javascript: classPopup('${selectedPath}', '${result.file}', '${result.kind}:${result.fqn}')">
                <#else>
                    <a href="javascript: otherPopup('${selectedPath}', '${result.file}', '${result.kind}:${result.enclosingFQN}:${result.simpleName}')">
                </#if>
                ${result.displayName?replace("&", "&amp;")?replace("<", "&lt;")}</a> in ${result.enclosingFQN?replace("&", "&amp;")?replace("<", "&lt;")}
                <br>
        </#list>
</#if>

<div id="popup"></div>
</body>
</html>
